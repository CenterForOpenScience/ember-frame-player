{{! template-lint-disable no-invalid-interactive}}
{{! template-lint-disable no-html-comments}}

<div class="input-group exp-lookit-video row {{unless autoProceed cursor-display}}">

    <!--RECORDER-->
    <div class="row recorder-container video-recorder-hidden">
        <div id="recorder" class="col-xs-12">
        </div>
    </div>

    <!--TEST MUSIC/AUDIO-->
    <audio id="exp-music" loop="loop">
        {{#each musicSources_parsed as |stream|}}
            <source src={{stream.src}} type={{stream.type}}>
        {{/each}}
    </audio>

    <div id="image-area" class={{if maximizeVideoArea "image-area-fs"}} >
        {{#if (or doRecording startSessionRecording)}}
            <p id="waitForVideo"> establishing video connection <br> please wait... </p>
        {{/if}}

        <!--VIDEO: TEST-->

        <div id="test-video" class="story-image-container {{if video.position video.position}}">
            {{#if doingTest}}
                <video id="player-video"
                       class="test story-image"
                       autoplay="autoplay"
                       onended={{ action "videoStopped"}}
                       onplay={{action "videoStarted"}}>
                    {{#each video_parsed.source as |stream|}}
                        <source src={{stream.src}} type={{stream.type}}>
                    {{/each}}
                </video>
            {{/if}}
        </div>

    </div>



    <!--PAUSE VIDEO AND TEXT-->
    <div id="paused-display">
        {{#if isPaused}}

            <video id="player-video"
                   class="attn"
                   autoplay="autoplay"
                   loop
                   >
                {{#each attnSources_parsed as |stream|}}
                    <source src={{stream.src}} type={{stream.type}}>
                {{/each}}
            </video>

            <p class="pause-instructions"> Study paused </p>
            {{#if updatedIsFullscreen}}
                <p class="pause-instructions"> Press space to resume </p>
                <p class="pause-instructions"> {{pauseText}} </p>
            {{/if}}

            <audio id="pause-audio" autoplay="autoplay">
                {{#each pauseAudio_parsed as |stream|}}
                    <source src={{stream.src}} type={{stream.type}}>
                {{/each}}
            </audio>

            {{#if doingAnnouncement}}
                <audio id="announcement-audio"
                       onended={{action "announcementEnded"}}
                       autoplay="autoplay"
                >
                    {{#if hasBeenPaused}}
                        {{#each unpauseAudio_parsed as |stream|}}
                            <source src={{stream.src}} type={{stream.type}}>
                        {{/each}}
                    {{else}}
                    {{/if}}
                </audio>
            {{/if}}
        {{/if}}
    </div>

    <!--FULLSCREEN BUTTON-->

    {{#unless updatedIsFullscreen}}
        <div class="row col-md-6 exp-lookit-video">
            <button type="button" class="btn btn-success" id="fsButton" {{ action "showFullscreen"}} {{!-- template-lint-disable no-inline-styles --}}>
                please return to fullscreen
            </button>
        </div>
    {{/unless}}


    {{#if (or (not autoProceed) parentTextBlock)}}

        <div id="story-controls">

            {{#unless noParentText}}
                <div id="parenttext">
                    {{exp-text-block block=parentTextBlock}}
                </div>
            {{/unless}}

            {{#unless autoProceed}}
                <div class="button-container right">
                    <button type="button" id="nextbutton" class="btn btn-success fill" {{ action "finish" }} >
                        Next <i class="fa fa-arrow-right"></i>
                    </button>
                </div>
            {{/unless}}

        </div>

    {{/if}}

</div>